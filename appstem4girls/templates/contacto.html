{% extends "base.html" %}

{% load static%}
{% load i18n %}
{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/contacto.css' %}">
{% endblock %}

{% block titulo %}Contacto{% endblock %}

{% block contenido %}
<div id="app">
    <!-- Hero Section -->
    <section class="hero-contactos">
        <div class="hero-content">
            <h1 class="hero-title">{% trans "Agenda de Contactos" %}</h1>
            <p class="hero-subtitle">{% trans "Gestiona tu red de contactos STEM" %}</p>
        </div>
        <div class="hero-glow"></div>
    </section>

    <!-- Barra de herramientas -->
    <section class="toolbar-section">
        <div class="container">
            <div class="toolbar-wrapper">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input v-model="busqueda" 
                           type="text" 
                           class="search-input" 
                           placeholder="Buscar por nombre, email o tel√©fono...">
                </div>
                <div class="sort-container">
                    <span class="sort-icon">üî§</span>
                    <select v-model="ordenarPor" class="sort-select">
                        <option value="nombre">{% trans "Ordenar por Nombre" %}</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Lista de Contactos -->
    <section id="contactos">
        <div class="container">
            <div class="contactos-header">
                <h2 class="section-title">
                    <span class="title-icon">üë•</span>
                    {% trans "Mis Contactos" %}
                    <span class="contactos-count" v-text="contactosFiltrados.length"></span>
                </h2>
            </div>

            <!-- Grid de contactos -->
            <div class="contactos-grid">
                <div class="contacto-card" v-for="(persona, index) in contactosFiltrados" :key="index"
                        itemscope itemtype="https://schema.org/Person"typeof="Person">
                    <div class="card-glow"></div>
                    <div class="card-content">
                        <div class="avatar-wrapper">
                            <div class="avatar" v-text="persona.nombre.charAt(0).toUpperCase()"></div>
                            <div class="avatar-glow"></div>
                        </div>
                        <div class="contacto-info">
                            <h3 class="contacto-nombre" itemprop="name" property="name" v-text="persona.nombre"> </h3>
                            <div class="contacto-detail">
                                <span class="detail-text"itemprop="email" property="email"v-text="persona.email"></span>
                            </div>
                            <div class="contacto-detail">
                                <span class="detail-text" itemprop="telephone" property="telephone" v-text="persona.telefono"> </span>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn-action btn-edit" 
                                    @click="editarPersona(personas.indexOf(persona))"
                                    title="Editar contacto">
                                ‚úèÔ∏è
                            </button>
                            <button class="btn-action btn-delete" 
                                    @click="eliminarPersona(personas.indexOf(persona))"
                                    title="Eliminar contacto">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mensaje vac√≠o -->
            <div v-if="contactosFiltrados.length === 0" class="empty-state">
                <div class="empty-icon">üîç</div>
                <h3 class="empty-title" v-if="busqueda">
                    {% trans "No se encontraron contactos" %}
                </h3>
                <h3 class="empty-title" v-else>
                    {% trans "No hay contactos a√∫n" %}
                </h3>
                <p class="empty-text" v-if="busqueda">
                    {% trans "No hay resultados para" %} <span v-text="busqueda"></span>
                </p>
                <p class="empty-text" v-else>
                    {% trans "¬°Comienza agregando tu primer contacto!" %}
                </p>
            </div>
        </div>
    </section>

    <!-- Formulario A√±adir/Editar -->
    <section id="nuevo">
        <div class="container">
            <div class="form-header">
                <h2 class="section-title">
                    {% if editando %}
                        {% trans "Actualizar Contacto" %}
                    {% else %}
                        {% trans "A√±adir Contacto" %}
                    {% endif %}
                </h2>
            </div>
            
            <div class="form-wrapper">
                <form @submit.prevent="agregarPersona" class="contact-form" novalidate>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                <span class="label-icon">üë§</span>
                                {% trans "Nombre Completo" %}
                            </label>
                            <input v-model="nuevo.nombre" 
                                   type="text" 
                                   class="form-input" 
                                   placeholder="Ej: Mar√≠a Garc√≠a"
                                   required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <span class="label-icon">‚úâÔ∏è</span>
                                {% trans "Correo Electr√≥nico" %}
                            </label>
                            <input v-model="nuevo.email" 
                                   type="email" 
                                   class="form-input" 
                                   placeholder="maria@ejemplo.com"
                                   required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <span class="label-icon">üì±</span>
                                {% trans "N√∫mero de Tel√©fono" %}
                            </label>
                            <input v-model="nuevo.telefono" 
                                   type="tel" 
                                   class="form-input" 
                                   placeholder="+34 612 345 678"
                                   required>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" 
                                class="btn-submit"
                                :class="editando !== null ? 'btn-update' : 'btn-add'">
                            <span class="btn-icon">
                                <span v-if="editando !== null">‚úèÔ∏è</span>
                                <span v-else>‚ûï</span>
                            </span>
                            {% if editando %}
                                {% trans "Actualizar Contacto" %}
                            {% else %}
                                {% trans "A√±adir Contacto" %}
                            {% endif %}
                        </button>
                        <button v-if="editando !== null" 
                                type="button"
                                @click="cancelarEdicion"
                                class="btn-cancel">
                            <span class="btn-icon">‚úñÔ∏è</span>
                            <span class="btn-text">Cancelar</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>
</div>  <!-- Fin del div controlado por Vue -->

    <!-- jQuery -->
    <!-- <script src="js/jquery.js"></script> -->

    <!-- Plugin JavaScript -->
    <!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="js/classie.js"></script>  -->

    <!-- Custom Theme JavaScript -->
    <!-- <script src="js/freelancer.js"></script> -->

    <!-- Vue -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script> -->
    <script src="{% static 'js/vue.js' %}"></script>   

{% endblock %}
